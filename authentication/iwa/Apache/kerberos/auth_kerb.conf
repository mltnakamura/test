#
# The mod_auth_kerb module implements Kerberos authentication over
# HTTP, following the "Negotiate" protocol.
# 

#LoadModule auth_kerb_module modules/mod_auth_kerb.so
LoadModule auth_ntlm_winbind_module modules/mod_auth_ntlm_winbind.so

#
# Sample configuration: Kerberos authentication must only be
# used over SSL to prevent replay attacks.  The keytab file
# configured must be readable only by the "apache" user, and
# must contain service keys for "HTTP/www.example.com", where
# "www.example.com" is the FQDN of this server.
#

#<Location /private>
#  SSLRequireSSL
#  AuthType Kerberos
#  AuthName "Kerberos Login"
#  KrbMethodNegotiate On
#  KrbMethodK5Passwd Off
#  KrbAuthRealms EXAMPLE.COM
#  Krb5KeyTab /etc/httpd/conf/keytab
#  require valid-user
#</Location>

<Location />
  AuthName "Neuron Login"
  require valid-user

#  Kerberos Setting
  AuthType Kerberos
  KrbServiceName HTTP/neuron-server.corp.example.com

  KrbMethodNegotiate On
  KrbMethodK5Passwd Off
  KrbAuthRealms CORP.EXAMPLE.COM
  KrbVerifyKDC   Off

#  SSLRequireSSL
  Krb5KeyTab /etc/httpd/conf/neuronkrb.keytab

#  Cookie Setting
  RewriteEngine on
  RewriteCond %{REMOTE_USER} (.*)
  RewriteRule .* - [E=REMOTE_USER:%1]
  Header add Set-Cookie "uid=%{REMOTE_USER}e; path=/; expires=Thu,1-jan-2030 00:00:00 GMT"
</Location>
